{"ast":null,"code":"var _jsxFileName = \"/home/pedro/Documents/Gest-o_veiculos/client/src/Components/Pages/Profile/index.tsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\n// CSS\nimport './Profile.css';\n\n// Toatfy\nimport { toast } from 'react-toastify';\n\n// Layouts\nimport Header from \"../../Layouts/Header\";\nimport Title from \"../../Layouts/Title\";\nimport Input from \"../../Layouts/Input\";\n\n// Icons\nimport { FiSettings } from \"react-icons/fi\";\n\n// API\nimport { api } from \"../../../utils/api\";\n\n// Context\nimport { AuthContext } from \"../../../Contexts/auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Profile = () => {\n  _s();\n  const {\n    company\n  } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const [companyEdit, setCompanyEdit] = useState({});\n  useEffect(() => {\n    api.get('company/edit', {\n      headers: {\n        session: JSON.parse(localStorage.getItem('@session')),\n        email: company.email\n      }\n    }).then(res => {\n      setCompanyEdit(res.data);\n    });\n  }, [companyEdit]);\n  const handleOnChange = e => {\n    setCompanyEdit({\n      ...companyEdit,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    let data = {\n      name: companyEdit.name,\n      email: companyEdit.email\n    };\n    if (companyEdit.password) {\n      data = {\n        ...data,\n        password: companyEdit.password,\n        confirmpassword: companyEdit.confirmpassword\n      };\n    }\n    await api.patch('company/update', data, {\n      headers: {\n        session: JSON.parse(localStorage.getItem('@session')),\n        email: company.email\n      }\n    }).then(res => {\n      toast.success('Empresa atualizada com sucesso');\n    }).catch(error => {\n      toast.error('Erro ao salvar as alterações, tente novamente mais tarde');\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        name: \"Minha conta\",\n        children: /*#__PURE__*/_jsxDEV(FiSettings, {\n          size: 25\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), companyEdit && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"form-profile\",\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            name: \"name\",\n            placeholder: \"Seu nome\",\n            value: companyEdit.name ? companyEdit.name : '',\n            text: \"Nome\",\n            handleOnChange: handleOnChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"email\",\n            name: \"email\",\n            placeholder: \"Seu email\",\n            value: companyEdit.email ? companyEdit.email : '',\n            text: \"Email\",\n            handleOnChange: handleOnChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"password\",\n            name: \"password\",\n            placeholder: \"Seu senha (opicional)\",\n            value: companyEdit.password ? companyEdit.password : '',\n            text: \"Senha\",\n            handleOnChange: handleOnChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"password\",\n            name: \"confirmpassword\",\n            placeholder: \"Confirme sua senha (opicional)\",\n            value: companyEdit.confirmpassword ? companyEdit.confirmpassword : '',\n            text: \"Confirma\\xE7\\xE3o de senha\",\n            handleOnChange: handleOnChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"Salvar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n};\n_s(Profile, \"n7zAO7cgXTgS4KaiHdO8oNjYCXg=\", false, function () {\n  return [useNavigate];\n});\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useContext","useState","useEffect","useNavigate","toast","Header","Title","Input","FiSettings","api","AuthContext","jsxDEV","_jsxDEV","Profile","_s","company","navigate","companyEdit","setCompanyEdit","get","headers","session","JSON","parse","localStorage","getItem","email","then","res","data","handleOnChange","e","target","name","value","handleSubmit","preventDefault","password","confirmpassword","patch","success","catch","error","children","fileName","_jsxFileName","lineNumber","columnNumber","className","size","onSubmit","type","placeholder","text","_c","$RefreshReg$"],"sources":["/home/pedro/Documents/Gest-o_veiculos/client/src/Components/Pages/Profile/index.tsx"],"sourcesContent":["import React, { FormEvent, useContext, useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\n// CSS\nimport './Profile.css';\n\n// Toatfy\nimport { toast } from 'react-toastify';\n\n// Layouts\nimport Header from \"../../Layouts/Header\";\nimport Title from \"../../Layouts/Title\";\nimport Input from \"../../Layouts/Input\";\n\n// Icons\nimport { FiSettings, FiUpload } from \"react-icons/fi\";\n\n// API\nimport { api } from \"../../../utils/api\";\n\n// Context\nimport { AuthContext } from \"../../../Contexts/auth\";\n\nconst Profile = () => {\n    const { company } = useContext<any>(AuthContext);\n    const navigate = useNavigate();\n    const [companyEdit, setCompanyEdit] = useState<any>({});\n\n    useEffect(() => {\n        api.get('company/edit', {\n            headers: {\n                session: JSON.parse(localStorage.getItem('@session')!),\n                email: company.email\n            }\n        })\n        .then((res : any) => {\n            setCompanyEdit(res.data);\n        })\n    }, [companyEdit]);\n\n    const handleOnChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setCompanyEdit({...companyEdit, [e.target.name]: e.target.value});\n    }\n\n    const handleSubmit = async (e: FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n\n        let data: {} = {\n            name: companyEdit.name,\n            email: companyEdit.email\n        }\n\n        if(companyEdit.password){\n            data = {\n                ...data, \n                password: companyEdit.password,\n                confirmpassword: companyEdit.confirmpassword\n            }\n        }\n\n        await api.patch('company/update', data, {\n            headers: {\n                session: JSON.parse(localStorage.getItem('@session')!),\n                email: company.email\n            }\n        })\n        .then((res: any) => {\n            toast.success('Empresa atualizada com sucesso');\n        })\n        .catch((error: any) => {\n            toast.error('Erro ao salvar as alterações, tente novamente mais tarde');\n        })\n\n    }\n\n    return (\n        <div>\n            <Header />\n            <div className=\"content\">\n                <Title name='Minha conta'> \n                    <FiSettings size={25}/>\n                </Title>\n\n                {companyEdit && (\n                    <div className=\"container\">\n                        <form className=\"form-profile\" onSubmit={handleSubmit}>\n                            <Input \n                                type=\"text\" \n                                name=\"name\" \n                                placeholder=\"Seu nome\" \n                                value={companyEdit.name? companyEdit.name : ''} \n                                text=\"Nome\"\n                                handleOnChange={handleOnChange}\n                            />\n\n                            <Input \n                                type=\"email\" \n                                name=\"email\" \n                                placeholder=\"Seu email\" \n                                value={companyEdit.email? companyEdit.email : ''} \n                                text=\"Email\"\n                                handleOnChange={handleOnChange}\n                            />\n\n                            <Input \n                                type=\"password\" \n                                name=\"password\" \n                                placeholder=\"Seu senha (opicional)\" \n                                value={companyEdit.password? companyEdit.password : ''} \n                                text=\"Senha\"\n                                handleOnChange={handleOnChange}\n                            />\n\n                            <Input \n                                type=\"password\" \n                                name=\"confirmpassword\" \n                                placeholder=\"Confirme sua senha (opicional)\" \n                                value={companyEdit.confirmpassword? companyEdit.confirmpassword : ''} \n                                text=\"Confirmação de senha\"\n                                handleOnChange={handleOnChange}\n                            />\n\n                            <button type=\"submit\">Salvar</button>\n\n                        </form>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n\nexport default Profile;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}